<html>

<input id="message"></input>
<button id="sub">Send</button>
<ul id="resp"></ul>

<script src="client/js/SocketDispatcher.js"></script>

<script>
    if (!window.WebSocket) { 
        alert("No websockets :(");
        return;
    }

    // Assume modern browser, needs websockets anyway
    var m = document.getElementById("message"),
        s = document.getElementById("sub"),
        r = document.getElementById("resp");

    var server = new SocketDispatcher("ws://localhost:8989/echo/");
    
    s.onclick = function() {
        server.send('partial', m.value);
    };

    server.on('multiple', function(results) {

        })
        .on('single', function(result) {
            var li = document.createElement("li");
            li.textContent = result;
            r.appendChild(li);
        })  
        .on('close', function(e) {
            console.warn("Socket Closed");
        })
        .on('error', function(){
            console.error("Socket Error!");
        });

</script>

</html>